{% extends "base.html" %}

{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <style>
     /* =====================================================
   GLOBAL RESET + DEFAULTS
===================================================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
}

body {
    background: #000;
    color: #fff;
    overflow-x: hidden;
}

/* =====================================================
   MAIN HERO SWIPER (TOP BANNER LIKE NETFLIX)
===================================================== */
.banner-swiper {
    width: 100%;
    height: 75vh;
    position: relative;
}

.banner-slide {
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: top center;
    position: relative;
}

.banner-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.9) 0%,
        rgba(0, 0, 0, 0.4) 50%,
        rgba(0, 0, 0, 0.2) 100%
    );
}

.banner-content {
    position: absolute;
    bottom: 18%;
    left: 8%;
    color: #fff;
    z-index: 10;
}

.banner-content h1 {
    font-size: 3.4rem;
    font-weight: 800;
    margin-bottom: 20px;
}

.banner-cta {
    padding: 12px 28px;
    background: #e50914;
    color: #fff;
    border-radius: 4px;
    font-weight: 600;
    text-decoration: none;
    transition: 0.3s ease;
}

.banner-cta:hover {
    background: #b20710;
}

/* =====================================================
   MOVIE GRID
===================================================== */
.movie-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
    gap: 25px;
    padding: 50px;
}

.movie-card {
    position: relative;
    cursor: pointer;
    overflow: hidden;
    border-radius: 10px;
    transition: transform 0.3s ease;
}

.movie-card img {
    width: 100%;
    height: 330px;
    object-fit: cover;
    border-radius: 10px;
    transition: transform 0.5s ease;
}

.movie-card:hover img {
    transform: scale(1.1);
}

/* =====================================================
   MOVIE CARD OVERLAY (NETFLIX HOVER EFFECT)
===================================================== */
.overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.9),
        rgba(0, 0, 0, 0.4)
    );
    opacity: 0;
    visibility: hidden;
    transition: 0.4s ease;
    padding: 20px;
    color: #fff;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}

.movie-card:hover .overlay {
    opacity: 1;
    visibility: visible;
}

.overlay h3 {
    font-size: 1.4rem;
    margin-bottom: 5px;
    transform: translateY(20px);
    transition: 0.3s ease;
}

.movie-card:hover .overlay h3 {
    transform: translateY(0);
}

.overlay p,
.overlay .book-btn {
    opacity: 0;
    transform: translateY(15px);
    transition: 0.3s ease;
}

.movie-card:hover .overlay p,
.movie-card:hover .book-btn {
    opacity: 1;
    transform: translateY(0);
}

/* BOOK BUTTON */
.book-btn {
    padding: 10px 18px;
    background: #e50914;
    border-radius: 5px;
    color: white;
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s ease;
}

.book-btn:hover {
    background: #b20710;
}

/* =====================================================
   NETFLIX STYLE â€“ FEATURED BANNER AFTER EVERY 8 MOVIES
===================================================== */
.featured-banner {
    width: 100%;
    height: 65vh;
    position: relative;
    border-radius: 0;
    overflow: hidden;
  
}

.featured-banner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1);
    transition: transform 1s ease;
    filter: brightness(0.85);
}

.featured-banner:hover img {
    transform: scale(1.08);
}

/* LEFT DARK GRADIENT LIKE NETFLIX */
.featured-banner::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to right,
        rgba(0, 0, 0, 0.9) 0%,
        rgba(0, 0, 0, 0.65) 35%,
        rgba(0, 0, 0, 0.4) 60%,
        rgba(0, 0, 0, 0.15) 100%
    );
    z-index: 2;
}

/* TEXT */
.banner-text {
    position: absolute;
    left: 6%;
    top: 33%;
    z-index: 10;
    color: #fff;
    max-width: 450px;
}

.banner-text h2 {
    font-size: 3.3rem;
    font-weight: 800;
    margin-bottom: 15px;
}

.banner-text p {
    font-size: 1.2rem;
    opacity: 0.85;
    margin-bottom: 20px;
}

/* BANNER CTA BUTTON */
.banner-btn {
    padding: 12px 25px;
    background: #e50914;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    border-radius: 4px;
    text-decoration: none;
    display: inline-block;
    transition: 0.3s ease;
}

.banner-btn:hover {
    background: #b20710;
}

/* =====================================================
   RESPONSIVE
===================================================== */
@media (max-width: 768px) {
    .banner-content h1 {
        font-size: 2.2rem;
    }

    .banner-swiper {
        height: 55vh;
    }

    .movie-grid {
        padding: 20px;
    }

    .featured-banner {
        height: 45vh;
    }

    .banner-text h2 {
        font-size: 2rem;
    }

    .banner-text p {
        font-size: 1rem;
    }
}

    </style>

</head>

<body>

    <!-- Banner / Swiper -->
    <div class="swiper banner-swiper">
        <div class="swiper-wrapper">
            {% for movie in movies %}
            <div class="swiper-slide banner-slide" style="background-image: url('{{ movie.img }}')">
                <div class="banner-overlay"></div>
                <div class="banner-content">
                    <h1>{{ movie.title }}</h1>
                    <a class="banner-cta" href="#movieGrid">Explore</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
    </div>
<!-- movies grid -->
<section id="movieGrid" class="movie-grid">
  {% for movie in movies %}
    <div class="movie-card" data-movie="{{ movie.title or movie.name }}">
      <img src="{{ movie.img }}" alt="{{ movie.title or movie.name }}">
      <div class="overlay">
        <h3>{{ movie.title or movie.name }}</h3>
        <p>Price: ${{ movie.price }}</p>

        {% if session.get('user_id') %}
          <a class="book-btn" href="{{ url_for('book', movie_id=movie.id) }}">Book Now</a>
        {% else %}
          <a class="book-btn" href="{{ url_for('signup') }}">Login to Book</a>
        {% endif %}
      </div>
    </div>

    {% if loop.index % 8 == 0 %}
      <div class="featured-banner">
        <img src="{{ movies[loop.index - 1].img }}" alt="Featured Movie">
        <div class="banner-text">
          <h2>ðŸ”¥ {{ movies[loop.index - 1].title or movies[loop.index - 1].name }}</h2>
          <p>Book now â€” shows filling fast!</p>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</section>




    <script>
        new Swiper('.banner-swiper', {
            loop: true,
            autoplay: { delay: 3500, disableOnInteraction: false },
            pagination: { el: '.swiper-pagination', clickable: true },
            effect: 'fade',
            speed: 800
        });
    </script>

</body>

</html>
{% endblock %}